<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>Un instant ‚ú®</title>

<style>
  :root{
    --bg1:#1e293b;
    --bg2:#020617;
    --glass: rgba(255,255,255,0.06);
    --border: rgba(255,255,255,0.12);
    --shadow: 0 22px 70px rgba(0,0,0,0.65);
  }

  body{
    margin:0;
    font-family:-apple-system, system-ui;
    background: radial-gradient(circle at top, var(--bg1), var(--bg2));
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    overflow:hidden;
  }

  .container{
    width:92%;
    max-width:560px;
    background: var(--glass);
    padding:28px;
    border-radius:22px;
    text-align:center;
    box-shadow: var(--shadow);
    backdrop-filter: blur(10px);
    border: 1px solid var(--border);
  }

  .title{
    font-size:34px;
    margin-bottom:16px;
    min-height:52px;
    text-shadow: 0 0 12px rgba(255,255,255,0.45);
    animation: glow 2.2s ease-in-out infinite alternate;
  }

  @keyframes glow{
    from{ text-shadow: 0 0 10px rgba(255,255,255,0.25); }
    to{ text-shadow: 0 0 24px rgba(255,255,255,0.75); }
  }

  .text{
    line-height:1.75;
    font-size:16px;
    opacity:0;
    transition:opacity 1.6s;
    white-space:pre-wrap;
    min-height: 120px;
  }

  .hint{
    margin-top: 10px;
    opacity: .72;
    font-size: 12px;
  }

  .grid{
    display:grid;
    gap:10px;
    margin-top:16px;
  }

  button{
    width:100%;
    padding:14px 14px;
    border-radius:14px;
    border:none;
    background:white;
    color:black;
    font-size:16px;
    cursor:pointer;
    transition:0.25s;
  }
  button:hover{ background:#e2e8f0; transform:scale(1.02); }

  .btnSoft{
    background: rgba(255,255,255,0.12);
    color:white;
    border: 1px solid rgba(255,255,255,0.18);
  }
  .btnSoft:hover{ background: rgba(255,255,255,0.16); }

  .btnGold{
    background: rgba(251,191,36,0.18);
    color: white;
    border: 1px solid rgba(251,191,36,0.30);
    font-weight: 700;
  }
  .btnGold:hover{ background: rgba(251,191,36,0.24); }

  .btnGreen{
    background: rgba(34,197,94,0.20);
    color: white;
    border: 1px solid rgba(34,197,94,0.35);
    font-weight: 700;
  }
  .btnGreen:hover{ background: rgba(34,197,94,0.28); }

  /* Lettre scell√©e */
  .sealWrap{
    display:flex;
    justify-content:center;
    margin: 14px 0 6px;
  }

  .envelope{
    width: 220px;
    height: 140px;
    border-radius: 18px;
    border: 1px solid rgba(255,255,255,0.18);
    background: rgba(0,0,0,0.18);
    position: relative;
    overflow:hidden;
    box-shadow: 0 14px 40px rgba(0,0,0,0.35);
    cursor:pointer;
    transition: transform .25s ease;
  }
  .envelope:hover{ transform: translateY(-2px); }

  .flap{
    position:absolute;
    inset:0;
    background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
    clip-path: polygon(0 0, 100% 0, 50% 55%);
    transform-origin: top;
    transition: transform .6s ease;
  }

  .paper{
    position:absolute;
    left: 10px;
    right: 10px;
    bottom: 10px;
    height: 110px;
    border-radius: 14px;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.16);
    transform: translateY(70px);
    transition: transform .75s ease;
  }

  .wax{
    position:absolute;
    left: 50%;
    top: 62px;
    transform: translateX(-50%);
    width: 46px;
    height: 46px;
    border-radius: 999px;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25), rgba(168,85,247,0.38));
    border: 1px solid rgba(255,255,255,0.18);
    box-shadow: 0 10px 22px rgba(0,0,0,0.25);
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight: 800;
    letter-spacing:.5px;
    opacity:.95;
  }

  .open .flap{ transform: rotateX(165deg); }
  .open .paper{ transform: translateY(0px); }

  .heart{
    position:absolute;
    color:white;
    animation: float 7s infinite linear;
    opacity:0.14;
    user-select:none;
    pointer-events:none;
  }
  @keyframes float{
    from{ transform:translateY(110vh); }
    to{ transform:translateY(-15vh); }
  }

  .tiny{
    font-size: 12px;
    opacity: .75;
    margin-top: 8px;
  }
</style>
</head>

<body>
<div class="container">
  <div class="title" id="title"></div>
  <div class="text" id="text"></div>

  <div id="extra"></div>

  <div class="grid">
    <button id="btn" style="display:none">Continuer</button>
  </div>

  <div class="hint" id="hint"></div>
</div>

<script>
  const SON_PRENOM = "Bambi";
  const TON_PRENOM = "Cheikhna";

  const titleEl = document.getElementById("title");
  const textEl  = document.getElementById("text");
  const btnEl   = document.getElementById("btn");
  const extraEl = document.getElementById("extra");
  const hintEl  = document.getElementById("hint");

  let step = 0;
  let ambience = "Douce";

  const name = SON_PRENOM + "...";

  function fadeInText(txt){
    textEl.style.opacity = 0;
    setTimeout(()=>{
      textEl.textContent = txt;
      textEl.style.opacity = 1;
    }, 120);
  }

  function typeName(){
    titleEl.textContent = "";
    let i = 0;
    function tick(){
      if(i < name.length){
        titleEl.textContent += name[i++];
        setTimeout(tick, 180);
      } else {
        setTimeout(showStep0, 550);
      }
    }
    tick();
  }

  function showStep0(){
    step = 0;
    extraEl.innerHTML = "";
    hintEl.textContent = "Lis doucement. Prends ton temps.";
    fadeInText(
`J‚Äôai pens√© √† toi.

Et j‚Äôai voulu cr√©er ce petit instant.

Pas pour poser des questions,
mais pour que tu ressentes quelque chose de doux ‚Äî
un moment unique, simple‚Ä¶ et inoubliable.

Parce que certains instants,
m√™me silencieux,
peuvent rester.`
    );

    btnEl.style.display = "block";
    btnEl.textContent = "Continuer";
  }

  function showStep1(){
    step = 1;
    titleEl.textContent = "Choisis une ambiance‚Ä¶";
    hintEl.textContent = "Ce choix change la suite.";
    textEl.style.opacity = 1;
    textEl.textContent =
`Si cet instant avait une couleur‚Ä¶
laquelle te ressemble aujourd‚Äôhui ?`;

    extraEl.innerHTML = `
      <div class="grid">
        <button class="btnSoft" data-a="Douce">üåô Douce</button>
        <button class="btnSoft" data-a="Myst√©rieuse">‚ú® Myst√©rieuse</button>
        <button class="btnSoft" data-a="Lumineuse">‚òÄÔ∏è Lumineuse</button>
      </div>
      <div class="tiny">Tu peux choisir sans r√©fl√©chir.</div>
    `;

    extraEl.querySelectorAll("[data-a]").forEach(b=>{
      b.onclick = () => {
        ambience = b.getAttribute("data-a");
        showStep2();
      };
    });

    btnEl.style.display = "none";
  }

  function showStep2(){
    step = 2;
    titleEl.textContent = "Une lettre pour toi";
    hintEl.textContent = "Clique sur l‚Äôenveloppe.";

    const intro =
`J‚Äôai gliss√© une petite lettre dedans.
Rien √† prouver. Rien √† r√©pondre.
Juste un instant √† vivre.`;

    fadeInText(intro);

    extraEl.innerHTML = `
      <div class="sealWrap">
        <div class="envelope" id="env">
          <div class="flap"></div>
          <div class="paper"></div>
          <div class="wax">‚ú¶</div>
        </div>
      </div>
      <div class="tiny">Ouvrir la lettre‚Ä¶</div>
    `;

    const env = document.getElementById("env");
    env.onclick = () => {
      env.classList.toggle("open");
      setTimeout(showLetterText, 520);
    };

    btnEl.style.display = "none";
  }

  function showLetterText(){
    const a = ambience;

    let letter = "";
    if(a === "Douce"){
      letter =
`${SON_PRENOM},

Je voulais que tu te sentes en s√©curit√© ici.
Que ce moment te fasse respirer.
Comme une lumi√®re basse, un silence qui apaise,
et une pens√©e qui te dit : ‚Äútu comptes‚Äù.

Si tu souris un peu‚Ä¶ c‚Äôest d√©j√† parfait.`;
    } else if(a === "Myst√©rieuse"){
      letter =
`${SON_PRENOM},

Il y a des instants qui ressemblent √† un secret.
On ne les explique pas.
On les ressent.

J‚Äôai voulu en cr√©er un, juste l√†,
entre le silence et la curiosit√©‚Ä¶
comme une √©toile qu‚Äôon remarque seulement quand on l√®ve la t√™te.`;
    } else {
      letter =
`${SON_PRENOM},

Je voulais quelque chose de lumineux.
Un petit √©lan qui r√©chauffe.
Un instant simple qui dit :
‚ÄúTu m√©rites la douceur, et les choses belles.‚Äù

Garde ce moment. Comme un sourire dans la poche.`;
    }

    fadeInText(letter);

    extraEl.innerHTML = `
      <div class="grid">
        <button class="btnGold" id="keepBtn">Garder ce moment ‚ú®</button>
        <button class="btnGreen" id="replyBtn">Me r√©pondre (copier) üí¨</button>
      </div>
      <div class="tiny">Tu peux juste lire‚Ä¶ ou envoyer un petit mot.</div>
    `;

    const keepText =
`Je garde ce moment. C‚Äô√©tait doux ‚ú®`;

    const replyText =
`Bambi‚Ä¶ je viens de lire ton instant.
C‚Äô√©tait ${ambience.toLowerCase()}‚Ä¶ et vraiment touchant.
Merci.

‚Äî ${SON_PRENOM ? "" : ""}`;

    // (r√©ponse courte, sans signature bizarre)
    const replyText2 =
`Je viens de lire ton instant‚Ä¶ c‚Äô√©tait ${ambience.toLowerCase()} et tr√®s beau.
Merci, √ßa m‚Äôa fait sourire.`;

    document.getElementById("keepBtn").onclick = async () => {
      await navigator.clipboard.writeText(keepText);
      alert("Copi√© ‚úÖ");
    };

    document.getElementById("replyBtn").onclick = async () => {
      await navigator.clipboard.writeText(replyText2);
      alert("Copi√© ‚úÖ (tu peux me l‚Äôenvoyer)");
    };

    btnEl.style.display = "block";
    btnEl.textContent = "Derni√®re page";
  }

  function showStep3(){
    step = 3;
    titleEl.textContent = "Derni√®re page‚Ä¶";
    hintEl.textContent = "";

    extraEl.innerHTML = "";
    btnEl.style.display = "none";

    fadeInText(
`${SON_PRENOM},

Si tu devais retenir une seule chose‚Ä¶
c‚Äôest celle-ci :

Tu m√©rites des instants doux.
Des instants vrais.
Des instants qui restent.

Et si un jour tu as envie d‚Äôen revivre un‚Ä¶
il suffit d‚Äôun mot.`
    );
  }

  btnEl.onclick = () => {
    if(step === 0) return showStep1();
    if(step === 2) return showStep3();
    // fallback
    showStep3();
  };

  // √©toiles flottantes
  const symbols = ["‚ú¶","‚úß","‚ú∫","‚ú∂"];
  for(let k=0; k<14; k++){
    const s = document.createElement("div");
    s.className = "heart";
    s.textContent = symbols[Math.floor(Math.random()*symbols.length)];
    s.style.left = Math.random()*100 + "vw";
    s.style.animationDuration = (4 + Math.random()*7) + "s";
    s.style.fontSize = (10 + Math.random()*22) + "px";
    s.style.opacity = (0.08 + Math.random()*0.14).toFixed(2);
    document.body.appendChild(s);
  }

  // start
  typeName();
</script>
</body>
</html>
