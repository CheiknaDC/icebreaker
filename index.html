<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Un petit instant ‚ú®</title>

<!-- ‚úçÔ∏è Police manuscrite + police lisible pour UI -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg1:#050b18;
  --bg2:#020617;
  --border: rgba(255,255,255,0.14);
  --shadow: 0 28px 90px rgba(0,0,0,0.75);
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family: Inter, -apple-system, system-ui, Arial, sans-serif;
  color:white;
  height:100vh;
  overflow:hidden;
  background: radial-gradient(circle at top, var(--bg1), var(--bg2));
}

/* üå∏ Pluie de fleurs */
#petals{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  display:block;
  z-index:0;
}

/* ‚ú® Bokeh (bulles) */
#bokeh{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  display:block;
  z-index:1;
  pointer-events:none;
  opacity:0.70;
}

/* ‚ú® Jeux de lumi√®re (aurora) */
.lights{
  position:fixed;
  inset:-20vmax;
  z-index:2;
  pointer-events:none;
  filter: blur(24px);
  opacity:0.85;
  animation: drift 10s ease-in-out infinite alternate;
  background:
    radial-gradient(closest-side at 18% 22%, rgba(168,85,247,0.25), transparent 55%),
    radial-gradient(closest-side at 85% 20%, rgba(34,197,94,0.18), transparent 55%),
    radial-gradient(closest-side at 70% 82%, rgba(59,130,246,0.14), transparent 55%),
    radial-gradient(closest-side at 30% 80%, rgba(251,191,36,0.10), transparent 55%);
}
@keyframes drift{
  from{ transform: translate3d(-2%, -1%, 0) scale(1.02); }
  to  { transform: translate3d( 2%,  1%, 0) scale(1.06); }
}

/* Grain */
.grain{
  position:fixed;
  inset:0;
  z-index:3;
  pointer-events:none;
  opacity:0.10;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.45'/%3E%3C/svg%3E");
  background-size:220px 220px;
  mix-blend-mode: overlay;
}

.wrap{
  position:relative;
  z-index:4;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
}

.container{
  width:min(720px, 92vw);
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
  border:1px solid var(--border);
  border-radius:26px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(14px);
  padding:22px;
  text-align:center;
  position:relative;
  overflow:hidden;
}

/* ‚úÖ Vague de lumi√®re */
.container .shine{
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:0;
  transform: translateX(-140%) rotate(10deg);
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(255,255,255,0.00) 35%,
    rgba(255,255,255,0.22) 50%,
    rgba(255,255,255,0.00) 65%,
    transparent 100%);
  filter: blur(2px);
}
.container.shine-run .shine{
  animation: shineMove 700ms ease-out forwards;
}
@keyframes shineMove{
  0%   { opacity:0; transform: translateX(-140%) rotate(10deg); }
  15%  { opacity:1; }
  100% { opacity:0; transform: translateX(140%) rotate(10deg); }
}

.container::before{
  content:"";
  position:absolute;
  inset:-40% -30% auto -30%;
  height:60%;
  background: radial-gradient(closest-side, rgba(255,255,255,0.20), transparent 70%);
  transform: rotate(-8deg);
  opacity:0.20;
  pointer-events:none;
}
.container::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:26px;
  pointer-events:none;
  background:
    linear-gradient(90deg, rgba(255,182,193,0.10), transparent 22%, transparent 78%, rgba(168,85,247,0.12));
  opacity:0.60;
  mix-blend-mode: screen;
}

.pill{
  display:inline-flex;
  gap:8px;
  align-items:center;
  padding:8px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.16);
  background: rgba(0,0,0,.18);
  font-size:12px;
  margin-bottom:10px;
}

/* ‚úçÔ∏è TITRES en manuscrit */
.title{
  font-family: "Great Vibes", cursive;
  font-size: 44px;
  margin: 10px 0 6px;
  text-shadow: 0 0 26px rgba(255,255,255,0.18);
  letter-spacing: 0.6px;
}

/* sous-texte lisible */
.sub{
  opacity:.90;
  font-size:14px;
  margin-bottom:12px;
  line-height:1.55;
}

/* ‚úçÔ∏è CARTES en manuscrit */
.card{
  text-align:left;
  padding:14px;
  border-radius:18px;
  background: rgba(0,0,0,0.14);
  border:1px solid rgba(255,255,255,0.12);
  box-shadow: 0 16px 50px rgba(0,0,0,0.35);
  font-family: "Great Vibes", cursive;
  font-size: 26px;
  line-height: 1.55;
  letter-spacing: 0.4px;
}

/* ‚úÖ Animation de tous les textes */
.line{
  opacity:0;
  transform: translateY(10px);
  animation: lineIn .55s ease forwards;
}
@keyframes lineIn{ to{ opacity:1; transform: translateY(0); } }

/* ‚úÖ mini ‚Äútap‚Äù */
.tap{ animation: tap 170ms ease-out; }
@keyframes tap{
  0%{ transform: scale(1); }
  50%{ transform: scale(0.985); }
  100%{ transform: scale(1); }
}

.grid{ display:grid; gap:10px; margin-top:14px; }

button{
  font-family: Inter, -apple-system, system-ui, Arial, sans-serif;
  padding:14px;
  border-radius:16px;
  border:none;
  font-size:16px;
  cursor:pointer;
  font-weight:700;
  transition: transform .18s ease, filter .18s ease, background .18s ease;
}

.main{
  background: rgba(255,255,255,0.92);
  color:black;
}
.main:hover{ transform: translateY(-1px) scale(1.01); filter: brightness(1.02); }

.soft{
  background: rgba(255,255,255,0.10);
  color:white;
  border:1px solid rgba(255,255,255,0.18);
}
.soft:hover{ transform: translateY(-1px) scale(1.01); background: rgba(255,255,255,0.14); }

.hint{
  margin-top:10px;
  opacity:.68;
  font-size:12px;
}

@media (prefers-reduced-motion: reduce){
  .lights{ animation:none; }
  .line{ opacity:1; transform:none; animation:none; }
  .container.shine-run .shine{ animation:none; opacity:0; }
}
</style>
</head>

<body>
<canvas id="petals"></canvas>
<canvas id="bokeh"></canvas>
<div class="lights"></div>
<div class="grain"></div>

<div class="wrap">
  <div class="container" id="container">
    <div class="shine"></div>
    <div id="app"></div>
  </div>
</div>

<script>
/* =========================
   Utils
   ========================= */
function rand(a,b){ return a + Math.random()*(b-a); }
function escapeHtml(str){
  return str.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");
}

/* =========================
   üå∏ Petals canvas
   ========================= */
const petalsCanvas = document.getElementById("petals");
const petalsCtx = petalsCanvas.getContext("2d", { alpha:true });

/* ‚ú® Bokeh canvas */
const bokehCanvas = document.getElementById("bokeh");
const bokehCtx = bokehCanvas.getContext("2d", { alpha:true });

let W=0,H=0,DPR=Math.min(2, window.devicePixelRatio || 1);

function resizeAll(){
  W = Math.floor(window.innerWidth);
  H = Math.floor(window.innerHeight);

  petalsCanvas.width  = Math.floor(W * DPR);
  petalsCanvas.height = Math.floor(H * DPR);
  petalsCanvas.style.width = W + "px";
  petalsCanvas.style.height = H + "px";
  petalsCtx.setTransform(DPR,0,0,DPR,0,0);

  bokehCanvas.width  = Math.floor(W * DPR);
  bokehCanvas.height = Math.floor(H * DPR);
  bokehCanvas.style.width = W + "px";
  bokehCanvas.style.height = H + "px";
  bokehCtx.setTransform(DPR,0,0,DPR,0,0);
}
window.addEventListener("resize", resizeAll, { passive:true });

/* petals */
const PETAL_COUNT = () => Math.floor(Math.max(34, Math.min(78, W * 0.11)));
let petals = [];
function makePetal(){
  const size = rand(10, 22);
  return {
    x: rand(0, W),
    y: rand(-H, H),
    s: size,
    vy: rand(0.85, 2.1),
    vx: rand(-0.22, 0.22),
    rot: rand(0, Math.PI*2),
    vr: rand(-0.02, 0.02),
    sway: rand(0.6, 1.8),
    phase: rand(0, Math.PI*2),
    a: rand(0.35, 0.85),
    hue: rand(320, 360)
  };
}
function resetPetals(){
  petals = [];
  const n = PETAL_COUNT();
  for(let i=0;i<n;i++) petals.push(makePetal());
}
function drawPetal(p){
  petalsCtx.save();
  petalsCtx.translate(p.x, p.y);
  petalsCtx.rotate(p.rot);

  const w = p.s * 0.75;
  const h = p.s;

  const grad = petalsCtx.createRadialGradient(0, -h*0.2, 0, 0, 0, h);
  grad.addColorStop(0, `hsla(${p.hue}, 80%, 82%, ${p.a})`);
  grad.addColorStop(1, `hsla(${p.hue}, 70%, 65%, ${p.a*0.55})`);

  petalsCtx.fillStyle = grad;
  petalsCtx.beginPath();
  petalsCtx.moveTo(0, -h*0.6);
  petalsCtx.quadraticCurveTo(w*0.9, -h*0.2, 0, h*0.6);
  petalsCtx.quadraticCurveTo(-w*0.9, -h*0.2, 0, -h*0.6);
  petalsCtx.closePath();
  petalsCtx.fill();

  petalsCtx.strokeStyle = `rgba(255,255,255,${p.a*0.14})`;
  petalsCtx.lineWidth = 1;
  petalsCtx.stroke();
  petalsCtx.restore();
}

/* bokeh */
const BOKEH_COUNT = () => Math.floor(Math.max(12, Math.min(26, W * 0.03)));
let bokehs = [];
function makeBokeh(){
  const r = rand(18, 60);
  return {
    x: rand(0, W),
    y: rand(0, H),
    r,
    vy: rand(-0.10, -0.35),
    vx: rand(-0.06, 0.06),
    a: rand(0.04, 0.12),
    hue: rand(200, 330),
    phase: rand(0, Math.PI*2),
    ps: rand(0.006, 0.014)
  };
}
function resetBokeh(){
  bokehs = [];
  const n = BOKEH_COUNT();
  for(let i=0;i<n;i++) bokehs.push(makeBokeh());
}

/* init */
function init(){
  resizeAll();
  resetPetals();
  resetBokeh();
}
init();

let last = performance.now();
function loop(now){
  const dt = Math.min(32, now-last);
  last = now;

  // petals
  petalsCtx.clearRect(0,0,W,H);
  for(const p of petals){
    p.phase += 0.01 * (dt/16);
    p.rot += p.vr * (dt/16);
    p.y += p.vy * (dt/16);
    p.x += (p.vx + Math.sin(p.phase)*0.22*p.sway) * (dt/16);
    drawPetal(p);

    if(p.y > H + 40){
      p.y = rand(-140, -20);
      p.x = rand(0, W);
      p.vy = rand(0.9, 2.3);
      p.vx = rand(-0.22, 0.22);
      p.s = rand(10, 22);
      p.a = rand(0.35, 0.85);
      p.hue = rand(320, 360);
    }
    if(p.x < -60) p.x = W + 60;
    if(p.x > W + 60) p.x = -60;
  }

  // bokeh
  bokehCtx.clearRect(0,0,W,H);
  for(const b of bokehs){
    b.phase += b.ps * (dt/16);
    b.y += b.vy * (dt/16);
    b.x += b.vx * (dt/16);

    const pulse = 0.65 + 0.35*Math.sin(b.phase);
    const a = b.a * pulse;

    const g = bokehCtx.createRadialGradient(b.x, b.y, 0, b.x, b.y, b.r);
    g.addColorStop(0, `hsla(${b.hue}, 85%, 78%, ${a})`);
    g.addColorStop(1, `hsla(${b.hue}, 85%, 78%, 0)`);

    bokehCtx.fillStyle = g;
    bokehCtx.beginPath();
    bokehCtx.arc(b.x, b.y, b.r, 0, Math.PI*2);
    bokehCtx.fill();

    if(b.y < -b.r - 20){
      b.y = H + b.r + 20;
      b.x = rand(0, W);
      b.r = rand(18, 60);
      b.vy = rand(-0.10, -0.35);
      b.vx = rand(-0.06, 0.06);
      b.a = rand(0.04, 0.12);
      b.hue = rand(200, 330);
      b.phase = rand(0, Math.PI*2);
      b.ps = rand(0.006, 0.014);
    }
  }

  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

/* =========================
   App
   ========================= */
const SON_PRENOM = "Bambi";
const app = document.getElementById("app");
const container = document.getElementById("container");

function animatedCard(text, baseDelay=0){
  const lines = text.split("\n");
  return `
    <div class="card">
      ${lines.map((l, i) => {
        const safe = l === "" ? "&nbsp;" : escapeHtml(l);
        return `<div class="line" style="animation-delay:${baseDelay + i*120}ms">${safe}</div>`;
      }).join("")}
    </div>
  `;
}

function shine(){
  container.classList.remove("shine-run");
  void container.offsetWidth;
  container.classList.add("shine-run");
}

function bindFancyClicks(){
  document.querySelectorAll("button").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      btn.classList.remove("tap");
      void btn.offsetWidth;
      btn.classList.add("tap");
      shine();
    }, { passive:true });
  });
}

function accueil(){
  const text =
`Je me suis demand√© comment tu allais.

Alors j‚Äôai cr√©√© ce petit instant.

Pas pour interrompre ta soir√©e,
juste pour appara√Ætre doucement dedans.

Tu peux ouvrir.`;

  app.innerHTML = `
    <div class="pill">‚ú® Un petit instant</div>
    <div class="title">${SON_PRENOM}‚Ä¶</div>
    ${animatedCard(text)}
    <div class="grid">
      <button class="main" onclick="pagePrincipale()">Ouvrir</button>
    </div>
    <div class="hint">Simple, doux‚Ä¶ et rapide.</div>
  `;
  bindFancyClicks();
}

function pagePrincipale(){
  const text =
`Je me suis demand√© comment tu allais, aujourd‚Äôhui.

Alors j‚Äôai laiss√© deux petites r√©ponses possibles.

Juste choisis celle qui te ressemble le plus.`;

  app.innerHTML = `
    <div class="pill">üí¨ Prendre de tes nouvelles</div>
    <div class="title">Salam la plus belle des Allemandes üá©üá™‚ú®</div>
    <div class="sub">J‚Äôesp√®re que tu vas bien.</div>
    ${animatedCard(text)}
    <div class="grid">
      <button class="soft" onclick="reponse('bien')">üòÑ √áa va super</button>
      <button class="soft" onclick="reponse('fatigue')">üòÆ‚Äçüí® Bof / fatigu√©e</button>
    </div>
  `;
  bindFancyClicks();
}

function reponse(type){
  if(type === "bien"){
    const text =
`C‚Äôest exactement ce que je voulais entendre.

Si tu vas bien‚Ä¶ alors tout va bien.

Petite pr√©cision, totalement inutile mais essentielle :
si ton sourire fait des d√©g√¢ts aujourd‚Äôhui,
je d√©cline toute responsabilit√© üòå

Dis-moi juste un petit moment cool de ta journ√©e.`;

    app.innerHTML = `
      <div class="pill">üå∏ Derni√®re page</div>
      <div class="title">√áa, c‚Äôest une bonne nouvelle üòÑ</div>
      ${animatedCard(text)}
      <div class="grid">
        <button class="main" onclick="copierBien()">Copier une r√©ponse WhatsApp üí¨</button>
        <button class="soft" onclick="accueil()">Rejouer</button>
      </div>
      <div class="hint">Tu copies, tu colles, et c‚Äôest parfait.</div>
    `;
  } else {
    const text =
`Ok‚Ä¶ alors je vais faire comme si je n‚Äôavais rien vu.

Mais entre nous,
la fatigue a choisi la mauvaise personne aujourd‚Äôhui üòå

Dis-moi juste :
qu‚Äôest-ce qui t‚Äôa vol√© ton √©nergie ?`;

    app.innerHTML = `
      <div class="pill">üåô Derni√®re page</div>
      <div class="title">Message re√ßu.</div>
      ${animatedCard(text)}
      <div class="grid">
        <button class="main" onclick="copierFatigue()">Copier une r√©ponse WhatsApp üí¨</button>
        <button class="soft" onclick="accueil()">Rejouer</button>
      </div>
      <div class="hint">Petit check-in, grand sourire.</div>
    `;
  }
  bindFancyClicks();
}

function copierBien(){
  navigator.clipboard.writeText("√áa va super üòÑ Et toi ?");
  alert("Message copi√© ‚úÖ");
}
function copierFatigue(){
  navigator.clipboard.writeText("Je suis un peu fatigu√©e üòÆ‚Äçüí® Et toi ?");
  alert("Message copi√© ‚úÖ");
}

accueil();
</script>
</body>
</html>
