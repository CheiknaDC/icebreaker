<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Un petit instant âœ¨</title>

<style>
:root{
  --bg1:#050b18;
  --bg2:#020617;
  --glass: rgba(255,255,255,0.07);
  --border: rgba(255,255,255,0.14);
  --shadow: 0 28px 90px rgba(0,0,0,0.75);
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family:-apple-system, system-ui;
  color:white;
  height:100vh;
  overflow:hidden;
  background: radial-gradient(circle at top, var(--bg1), var(--bg2));
}

/* ğŸŒ¸ Pluie de fleurs */
#petals{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  display:block;
  z-index:0;
}

/* âœ¨ Jeux de lumiÃ¨re */
.lights{
  position:fixed;
  inset:-20vmax;
  z-index:1;
  pointer-events:none;
  filter: blur(24px);
  opacity:0.85;
  animation: drift 10s ease-in-out infinite alternate;
  background:
    radial-gradient(closest-side at 18% 22%, rgba(168,85,247,0.25), transparent 55%),
    radial-gradient(closest-side at 85% 20%, rgba(34,197,94,0.18), transparent 55%),
    radial-gradient(closest-side at 70% 82%, rgba(59,130,246,0.14), transparent 55%),
    radial-gradient(closest-side at 30% 80%, rgba(251,191,36,0.10), transparent 55%);
}
@keyframes drift{
  from{ transform: translate3d(-2%, -1%, 0) scale(1.02); }
  to  { transform: translate3d( 2%,  1%, 0) scale(1.06); }
}

/* Grain */
.grain{
  position:fixed;
  inset:0;
  z-index:2;
  pointer-events:none;
  opacity:0.10;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.45'/%3E%3C/svg%3E");
  background-size:220px 220px;
  mix-blend-mode: overlay;
}

.wrap{
  position:relative;
  z-index:3;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
}

.container{
  width:min(720px, 92vw);
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
  border:1px solid var(--border);
  border-radius:26px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(14px);
  padding:22px;
  text-align:center;
  position:relative;
  overflow:hidden;
}

/* âœ… Vague de lumiÃ¨re (overlay) */
.container .shine{
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:0;
  transform: translateX(-140%) rotate(10deg);
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(255,255,255,0.00) 35%,
    rgba(255,255,255,0.22) 50%,
    rgba(255,255,255,0.00) 65%,
    transparent 100%);
  filter: blur(2px);
}

.container.shine-run .shine{
  animation: shineMove 700ms ease-out forwards;
}

@keyframes shineMove{
  0%   { opacity:0; transform: translateX(-140%) rotate(10deg); }
  15%  { opacity:1; }
  100% { opacity:0; transform: translateX(140%) rotate(10deg); }
}

.container::before{
  content:"";
  position:absolute;
  inset:-40% -30% auto -30%;
  height:60%;
  background: radial-gradient(closest-side, rgba(255,255,255,0.20), transparent 70%);
  transform: rotate(-8deg);
  opacity:0.20;
  pointer-events:none;
}
.container::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:26px;
  pointer-events:none;
  background:
    linear-gradient(90deg, rgba(255,182,193,0.10), transparent 22%, transparent 78%, rgba(168,85,247,0.12));
  opacity:0.60;
  mix-blend-mode: screen;
}

.pill{
  display:inline-flex;
  gap:8px;
  align-items:center;
  padding:8px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.16);
  background: rgba(0,0,0,.18);
  font-size:12px;
  margin-bottom:10px;
}

.title{
  font-size:30px;
  margin:10px 0 8px;
  text-shadow: 0 0 26px rgba(255,255,255,0.18);
}

.sub{
  opacity:.90;
  font-size:14px;
  margin-bottom:12px;
  line-height:1.55;
}

/* âœ… Carte */
.card{
  text-align:left;
  padding:14px;
  border-radius:18px;
  background: rgba(0,0,0,0.14);
  border:1px solid rgba(255,255,255,0.12);
  line-height:1.75;
  font-size:16px;
  box-shadow: 0 16px 50px rgba(0,0,0,0.35);
}

/* âœ… Animation de TOUS les textes */
.line{
  opacity:0;
  transform: translateY(8px);
  animation: lineIn .55s ease forwards;
  will-change: transform, opacity;
}
@keyframes lineIn{ to{ opacity:1; transform: translateY(0); } }

.grid{
  display:grid;
  gap:10px;
  margin-top:14px;
}

/* âœ… petit â€œtapâ€ premium */
.tap{
  animation: tap 170ms ease-out;
}
@keyframes tap{
  0%{ transform: scale(1); }
  50%{ transform: scale(0.985); }
  100%{ transform: scale(1); }
}

button{
  padding:14px;
  border-radius:16px;
  border:none;
  font-size:16px;
  cursor:pointer;
  font-weight:750;
  transition: transform .18s ease, filter .18s ease, background .18s ease;
  will-change: transform;
}

.main{
  background: rgba(255,255,255,0.92);
  color:black;
}
.main:hover{ transform: translateY(-1px) scale(1.01); filter: brightness(1.02); }

.soft{
  background: rgba(255,255,255,0.10);
  color:white;
  border:1px solid rgba(255,255,255,0.18);
}
.soft:hover{ transform: translateY(-1px) scale(1.01); background: rgba(255,255,255,0.14); }

.hint{
  margin-top:10px;
  opacity:.68;
  font-size:12px;
}

@media (prefers-reduced-motion: reduce){
  .lights{ animation:none; }
  button{ transition:none; }
  .line{ opacity:1; transform:none; animation:none; }
  .container.shine-run .shine{ animation:none; opacity:0; }
}
</style>
</head>

<body>
<canvas id="petals"></canvas>
<div class="lights"></div>
<div class="grain"></div>

<div class="wrap">
  <div class="container" id="container">
    <div class="shine"></div>
    <div id="app"></div>
  </div>
</div>

<script>
/* =========================
   ğŸŒ¸ Pluie de fleurs (Canvas)
   ========================= */
const canvas = document.getElementById("petals");
const ctx = canvas.getContext("2d", { alpha:true });

let W=0,H=0,DPR=Math.min(2, window.devicePixelRatio || 1);
function resize(){
  W = Math.floor(window.innerWidth);
  H = Math.floor(window.innerHeight);
  canvas.width = Math.floor(W * DPR);
  canvas.height = Math.floor(H * DPR);
  canvas.style.width = W + "px";
  canvas.style.height = H + "px";
  ctx.setTransform(DPR,0,0,DPR,0,0);
}
window.addEventListener("resize", resize, { passive:true });
resize();

function rand(a,b){ return a + Math.random()*(b-a); }

const PETAL_COUNT = Math.floor(Math.max(40, Math.min(90, W * 0.12)));
const petals = [];
function makePetal(){
  const size = rand(10, 22);
  return {
    x: rand(0, W),
    y: rand(-H, H),
    s: size,
    vy: rand(0.8, 2.2),
    vx: rand(-0.25, 0.25),
    rot: rand(0, Math.PI*2),
    vr: rand(-0.02, 0.02),
    sway: rand(0.6, 1.8),
    phase: rand(0, Math.PI*2),
    a: rand(0.35, 0.85),
    hue: rand(320, 360)
  };
}
for(let i=0;i<PETAL_COUNT;i++) petals.push(makePetal());

function drawPetal(p){
  ctx.save();
  ctx.translate(p.x, p.y);
  ctx.rotate(p.rot);

  const w = p.s * 0.75;
  const h = p.s;

  const grad = ctx.createRadialGradient(0, -h*0.2, 0, 0, 0, h);
  grad.addColorStop(0, `hsla(${p.hue}, 80%, 82%, ${p.a})`);
  grad.addColorStop(1, `hsla(${p.hue}, 70%, 65%, ${p.a*0.55})`);

  ctx.fillStyle = grad;
  ctx.beginPath();
  ctx.moveTo(0, -h*0.6);
  ctx.quadraticCurveTo(w*0.9, -h*0.2, 0, h*0.6);
  ctx.quadraticCurveTo(-w*0.9, -h*0.2, 0, -h*0.6);
  ctx.closePath();
  ctx.fill();

  ctx.strokeStyle = `rgba(255,255,255,${p.a*0.15})`;
  ctx.lineWidth = 1;
  ctx.stroke();

  ctx.restore();
}

let last = performance.now();
function tick(now){
  const dt = Math.min(32, now-last);
  last = now;

  ctx.clearRect(0,0,W,H);

  for(const p of petals){
    p.phase += 0.01 * (dt/16);
    p.rot += p.vr * (dt/16);
    p.y += p.vy * (dt/16);
    p.x += (p.vx + Math.sin(p.phase)*0.25*p.sway) * (dt/16);

    drawPetal(p);

    if(p.y > H + 40){
      p.y = rand(-120, -20);
      p.x = rand(0, W);
      p.vy = rand(0.8, 2.4);
      p.vx = rand(-0.25, 0.25);
      p.s = rand(10, 22);
      p.a = rand(0.35, 0.85);
      p.hue = rand(320, 360);
    }
    if(p.x < -60) p.x = W + 60;
    if(p.x > W + 60) p.x = -60;
  }

  requestAnimationFrame(tick);
}
requestAnimationFrame(tick);

/* =========================
   âœ… App + animations partout
   + vague de lumiÃ¨re au clic
   ========================= */
const SON_PRENOM = "Bambi";
const app = document.getElementById("app");
const container = document.getElementById("container");

function escapeHtml(str){
  return str.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");
}

function animatedCard(text, baseDelay=0){
  const lines = text.split("\n");
  return `
    <div class="card">
      ${lines.map((l, i) => {
        const safe = l === "" ? "&nbsp;" : escapeHtml(l);
        return `<div class="line" style="animation-delay:${baseDelay + i*120}ms">${safe}</div>`;
      }).join("")}
    </div>
  `;
}

/* âœ… Lance la vague de lumiÃ¨re */
function shine(){
  container.classList.remove("shine-run");
  void container.offsetWidth; // reflow
  container.classList.add("shine-run");
}

/* âœ… Effet tap sur bouton + vague */
function bindFancyClicks(){
  document.querySelectorAll("button").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      btn.classList.remove("tap");
      void btn.offsetWidth;
      btn.classList.add("tap");
      shine();
    }, { passive:true });
  });
}

function accueil(){
  const text =
`Je me suis demandÃ© comment tu allais.

Alors jâ€™ai crÃ©Ã© ce petit instant.

Pas pour interrompre ta soirÃ©e,
juste pour apparaÃ®tre doucement dedans.

Tu peux ouvrir.`;

  app.innerHTML = `
    <div class="pill">âœ¨ Un petit instant</div>
    <div class="title">${SON_PRENOM}â€¦</div>
    ${animatedCard(text)}
    <div class="grid">
      <button class="main" onclick="pagePrincipale()">Ouvrir</button>
    </div>
    <div class="hint">Simple, douxâ€¦ et rapide.</div>
  `;
  bindFancyClicks();
}

function pagePrincipale(){
  const text =
`Je me suis demandÃ© comment tu allais, aujourdâ€™hui.

Alors jâ€™ai laissÃ© deux petites rÃ©ponses possibles.

Juste choisis celle qui te ressemble le plus.`;

  app.innerHTML = `
    <div class="pill">ğŸ’¬ Prendre de tes nouvelles</div>
    <div class="title">Salam la plus belle des Allemandes ğŸ‡©ğŸ‡ªâœ¨</div>
    <div class="sub">Jâ€™espÃ¨re que tu vas bien.</div>
    ${animatedCard(text)}
    <div class="grid">
      <button class="soft" onclick="reponse('bien')">ğŸ˜„ Ã‡a va super</button>
      <button class="soft" onclick="reponse('fatigue')">ğŸ˜®â€ğŸ’¨ Bof / fatiguÃ©e</button>
    </div>
  `;
  bindFancyClicks();
}

function reponse(type){
  if(type === "bien"){
    const text =
`Câ€™est exactement ce que je voulais entendre.

Si tu vas bienâ€¦ alors tout va bien.

Petite prÃ©cision, totalement inutile mais essentielle :
si ton sourire fait des dÃ©gÃ¢ts aujourdâ€™hui,
je dÃ©cline toute responsabilitÃ© ğŸ˜Œ

Dis-moi juste un petit moment cool de ta journÃ©e.`;

    app.innerHTML = `
      <div class="pill">ğŸŒ¸ DerniÃ¨re page</div>
      <div class="title">Ã‡a, câ€™est une bonne nouvelle ğŸ˜„</div>
      ${animatedCard(text)}
      <div class="grid">
        <button class="main" onclick="copierBien()">Copier une rÃ©ponse WhatsApp ğŸ’¬</button>
        <button class="soft" onclick="accueil()">Rejouer</button>
      </div>
      <div class="hint">Tu copies, tu colles, et câ€™est parfait.</div>
    `;
  } else {
    const text =
`Okâ€¦ alors je vais faire comme si je nâ€™avais rien vu.

Mais entre nous,
la fatigue a choisi la mauvaise personne aujourdâ€™hui ğŸ˜Œ

Dis-moi juste :
quâ€™est-ce qui tâ€™a volÃ© ton Ã©nergie ?`;

    app.innerHTML = `
      <div class="pill">ğŸŒ™ DerniÃ¨re page</div>
      <div class="title">Message reÃ§u.</div>
      ${animatedCard(text)}
      <div class="grid">
        <button class="main" onclick="copierFatigue()">Copier une rÃ©ponse WhatsApp ğŸ’¬</button>
        <button class="soft" onclick="accueil()">Rejouer</button>
      </div>
      <div class="hint">Petit check-in, grand sourire.</div>
    `;
  }
  bindFancyClicks();
}

function copierBien(){
  navigator.clipboard.writeText("Ã‡a va super ğŸ˜„ Et toi ?");
  alert("Message copiÃ© âœ…");
}
function copierFatigue(){
  navigator.clipboard.writeText("Je suis un peu fatiguÃ©e ğŸ˜®â€ğŸ’¨ Et toi ?");
  alert("Message copiÃ© âœ…");
}

accueil();
</script>
</body>
</html>
